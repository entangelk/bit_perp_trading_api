# CCXT를 이용한 Bybit 자동 선물 거래 시스템

## 사용 지표
- MACD
- RSI
- 스토캐스틱
- 볼린져밴드
- 거래량
- 공포/탐욕 지수
- 뉴스
- 차트 그림

## 판단 AI
- GPT-4o


## 구동 기획

### 1. 매매 신호는 5가지로 분류

|적극매수|매수|홀드|매도|적극매도|
|--|--|--|--|--|
|superbuy|buy|hold|sell|supersell|

점수 1~2: 강한 숏 신호.

점수 3: 중립 신호, 포지션 유지 또는 청산.

점수 4~5: 강한 롱 신호

### 2. 포지션 전환 기준
* 롱 포지션에서 숏으로 전환:
    - 점수가 3 이하로 떨어지고, 2회 연속 그 상태가 유지될 때 숏으로 전환.
* 숏 포지션에서 롱으로 전환:
    - 점수가 4 이상으로 올라가고, 2회 연속 그 상태가 유지될 때 롱으로 전환.

### 3. 익절 및 손절 기준
* 익절 기준:
    
```
- 롱 포지션 익절

점수가 5에 도달한 후, 점수가 하락하여 4로 떨어지면 익절.
또는 특정 퍼센트 이익(예: 5% 상승)을 기록하면 자동 익절.
```
```
- 숏 포지션 익절

점수가 1에 도달한 후, 점수가 상승하여 2로 올라가면 익절.
또는 일정 퍼센트의 이익(예: 5% 하락)을 기록하면 익절.
```

* 손절 기준:
    - 롱 포지션 손절: 점수가 3 이하로 2회 연속 하락하면 손절.
    - 숏 포지션 손절: 점수가 4 이상으로 2회 연속 상승하면 손절.


### 4. 포지션 크기 조정


|신호|포지션|비율|
|--|--|--|
|superbuy|롱|10%|
|buy|롱|5%|
|hold|buy|0~1%|
|sell|숏|5%|
|supersell|숏|10%|


### 5. 진입 계획

1. 수집 데이터 : 비트코인 15분봉(최대), 1시간봉(24시간), 1일봉(30일)
2. 프로세스 실행 : 데이터 수집 후 매 30분 마다
3. 1분? 5분? 포지션 종료 여부 체크
    - 종료 시 곧바로 프로세서 진행?? (최대한 많은 거래)
    - 기다렸다가 자동 진행 (30분마다 진행인데 조금 아깝지 않나?)
    - 택 1해서 프로세스 제작하기
4. 포지션이 없을 때
    - ai에게 받을 데이터 : 포지션(long, stay, short), TP/SL, 레버리지 비율, 진입가격(자본의%)
    - ai에게 받을 데이터 타입 : 포지션(str), TP/SL(Float), 레버리지 비율(int), 진입가격(float)
    - 레버리지 비율은 최대 10배가 넘지 않도록
    - 자본의 경우 최소한으로 진입? 5%씩은 어떤지?
5. 포지션이 있을 때
    - 2가지로 나눠서 데이터 호출 (홀딩 / 판매)


## 저장 및 백테스킹


## 해야할일
api 요청 실패시 예외처리 해줘야됨
ai 호출방식 정립 - gpt4o 한테 물어보지 말기. 자기 자신의 것을 모른다. (끗)
지금 데이터가 너무 많아서 토큰을 줄여야함 (얼추 끗)
포지션 있을 때 api 모델에 의한 구조 바꿔야함
